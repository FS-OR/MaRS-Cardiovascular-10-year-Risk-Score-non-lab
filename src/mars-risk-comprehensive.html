<!DOCTYPE html>
<!-- 
  MaRS — Comprehensive Cardiovascular Risk Tools
  Author: Vicențiu Bogdan Ion Marciu
  Version: 1.0 — October 2025
  License: MaRS Open Collaboration License
  License Version: 1.0 — 2025-10-06
-->
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MaRS — Comprehensive Cardiovascular Risk Tools</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>

<style>
/* MaRS – Style Sheet (v1.0)
   Author: Vicențiu Bogdan Ion Marciu
   License: MaRS Open Collaboration License (Version 1.0 — 2025-10-06)
*/
body {
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  background-color: #f8f9fa;
  margin: 40px auto;
  max-width: 520px;
  color: #222;
}
h1 {
  text-align: center;
  color: #0e7afe;
  font-size: 1.8em;
  margin-bottom: 20px;
}
h2 {
  color: #0e7afe;
  font-size: 1.4em;
  margin-top: 30px;
  margin-bottom: 10px;
  text-align: center;
}
.card {
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 16px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}
label {
  display: block;
  margin-bottom: 12px;
  font-weight: 500;
}
input,
select {
  width: 100%;
  margin-top: 4px;
  padding: 6px 8px;
  border: 1px solid #ccc;
  border-radius: 6px;
  font-size: 15px;
  background-color: #fff;
  box-sizing: border-box;
}
.row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
}
.btn {
  width: 100%;
  margin-top: 16px;
  background-color: #0e7afe;
  color: #fff;
  border: none;
  padding: 10px 0;
  border-radius: 6px;
  cursor: pointer;
  font-size: 16px;
  font-weight: 600;
  transition: background-color 0.2s ease;
}
.btn:hover {
  background-color: #0b66d1;
}
.results {
  margin-top: 18px;
  text-align: center;
  font-size: 18px;
  font-weight: 600;
}
.ok {
  color: #007e33;
}
.warn {
  color: #ff8800;
}
.bad {
  color: #cc0000;
}
.foot {
  margin-top: 30px;
  font-size: 13px;
  text-align: center;
  color: #555;
  line-height: 1.4em;
}
hr {
  margin: 25px 0;
  border: none;
  border-top: 1px solid #ddd;
}
.muted {
  color: #666;
  font-size: 13px;
}
.pill {
  display: inline-block;
  padding: 3px 8px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 600;
}
.chip {
  display: inline-block;
  padding: 3px 8px;
  border-radius: 999px;
  font-size: 12px;
  background: #f1f5f9;
  color: #222;
  margin-left: 6px;
}
.banner {
  background: #e6f0ff;
  padding: 20px;
  border-radius: 12px;
  text-align: center;
  margin-bottom: 20px;
}
.banner a {
  color: #0e7afe;
  text-decoration: none;
}
.banner a:hover {
  text-decoration: underline;
}
.toggle-details {
  cursor: pointer;
  color: #0e7afe;
  font-size: 13px;
  margin-top: 10px;
}
.chart-container {
  margin-top: 20px;
  padding: 20px;
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 12px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}
</style>
</head>
<body>

<div class="banner">
  <h2>MaRS — Comprehensive Cardiovascular Risk Tools</h2>
  <p>MaRS is a research project for non-laboratory cardiovascular risk determination, currently under validation within the <b>Fast Science – Open Research</b> initiative. It aims to promote simple and broad participation of health professionals in clinical research.</p>
  <p><a href="https://github.com/FS-OR/MaRS-Cardiovascular-10-year-Risk-Score-non-lab" target="_blank">GitHub Repository</a> | <a href="https://github.com/FS-OR/MaRS-Cardiovascular-10-year-Risk-Score-non-lab/blob/main/LICENSE" target="_blank">MaRS Open Collaboration License</a></p>
</div>

<h1>MaRS — Comprehensive Cardiovascular Risk Tools</h1>
<hr>

<h2>1. Blood Pressure Interpreter — AHA vs ESH</h2>

<div class="card">
  <div class="row">
    <div>
      <label for="sbp">SBP (mmHg)</label>
      <input id="sbp" type="number" min="50" max="260" step="1" placeholder="e.g. 128">
    </div>
    <div>
      <label for="dbp">DBP (mmHg)</label>
      <input id="dbp" type="number" min="30" max="160" step="1" placeholder="e.g. 82">
    </div>
    <div>
      <label for="context">Context</label>
      <select id="context">
        <option value="office">Office / Clinic</option>
        <option value="home_day">Home or ABPM Daytime</option>
        <option value="night">ABPM Nighttime</option>
        <option value="twentyfour">ABPM 24h Average</option>
      </select>
    </div>
  </div>

  <button class="btn" id="runBtn">Interpret</button>
</div>

<div class="results" id="results"></div>

<script>
function ahaCategory(sbp, dbp){
  if (sbp >= 180 || dbp >= 120) return {label: 'Hypertensive Crisis', tone: 'bad'};
  if (sbp >= 140 || dbp >= 90) return {label: 'Stage 2 Hypertension', tone: 'bad'};
  if ((sbp >= 130 && sbp <= 139) || (dbp >= 80 && dbp <= 89)) return {label: 'Stage 1 Hypertension', tone: 'warn'};
  if (sbp >= 120 && sbp <= 129 && dbp < 80) return {label: 'Elevated', tone: 'warn'};
  if (sbp < 120 && dbp < 80) return {label: 'Normal', tone: 'ok'};
  return {label: 'Uncategorized', tone: 'ok'};
}
function run(){
  const sbp = parseFloat(document.getElementById('sbp').value);
  const dbp = parseFloat(document.getElementById('dbp').value);
  if(isNaN(sbp)||isNaN(dbp)){document.getElementById('results').innerHTML='<div class="card">Enter SBP and DBP</div>';return;}
  const cat = ahaCategory(sbp, dbp);
  document.getElementById('results').innerHTML=`<div class="card ${cat.tone}">${cat.label}</div>`;
}
document.getElementById('runBtn').addEventListener('click', run);
</script>

<hr>

<h2>2. MaRS 10-Year Cardiovascular Risk Calculator</h2>
<div class="card">
  <form id="mars-form">
    <div class="row">
      <div><label>Age (30-79)</label><input type="number" id="mars_age" min="30" max="79" required></div>
      <div><label>Sex</label><select id="mars_sex"><option value="male">Male</option><option value="female">Female</option></select></div>
      <div><label>SBP (90-200)</label><input type="number" id="mars_sbp" min="90" max="200" required></div>
      <div><label>BMI (16-50)</label><input type="number" id="mars_bmi" min="16" max="50" step="0.1" required></div>
    </div>
    <button class="btn" type="button" onclick="calculateMaRSRisk()">Calculate</button>
  </form>
</div>
<div id="mars-result" class="results"></div>

<script>
function calculateMaRSRisk(){
  const age=parseFloat(document.getElementById('mars_age').value);
  const sex=(document.getElementById('mars_sex').value==='male')?1:0;
  const sbp=parseFloat(document.getElementById('mars_sbp').value);
  const bmi=parseFloat(document.getElementById('mars_bmi').value);
  if(isNaN(age)||isNaN(sbp)||isNaN(bmi)){document.getElementById('mars-result').innerHTML='<div class="card">Invalid inputs.</div>';return;}
  const logit=-3.2+0.7*((age-50)/10)+0.45*sex+0.18*((sbp-120)/10)+0.22*((bmi-25)/5);
  const risk=100/(1+Math.exp(-logit));
  document.getElementById('mars-result').innerHTML=`<div class="card">10-year risk: ${risk.toFixed(2)}%</div>`;
}
</script>

<hr>

<h2>3. Risk Comparison Chart</h2>
<div class="chart-container"><canvas id="riskChart"></canvas></div>
<script>
let riskChart=null;
function updateRiskChart(){
  const ctx=document.getElementById('riskChart').getContext('2d');
  const data={labels:['MaRS'],datasets:[{data:[20],backgroundColor:['#0e7afe']}]};
  if(riskChart){riskChart.data=data;riskChart.update();}
  else{riskChart=new Chart(ctx,{type:'bar',data:data,options:{scales:{y:{beginAtZero:true,max:100}}}});}
}
updateRiskChart();
</script>

<div class="foot">
  <p>© 2025 MaRS — Fast Science / Open Research</p>
</div>
</body>
</html>
